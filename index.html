<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>PrimeCast • TV Brasileira Premium</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://unpkg.com/video.js/dist/video-js.min.css" rel="stylesheet" />
  <script src="https://unpkg.com/video.js/dist/video.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    html, body {
      height: 100%;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: radial-gradient(ellipse at center, #0f1419 0%, #000000 70%);
      color: #ffffff;
      overflow-x: hidden;
    }

    /* Background animado */
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: 
        radial-gradient(circle at 20% 50%, rgba(120, 119, 198, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 40% 80%, rgba(120, 200, 255, 0.1) 0%, transparent 50%);
      animation: backgroundMove 20s ease-in-out infinite;
      z-index: -1;
    }

    @keyframes backgroundMove {
      0%, 100% { transform: scale(1) rotate(0deg); }
      50% { transform: scale(1.1) rotate(5deg); }
    }

    /* Header moderno */
    .header-glass {
      backdrop-filter: blur(20px);
      background: rgba(15, 20, 25, 0.8);
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    /* Search bar moderna */
    .search-container {
      position: relative;
    }

    .search-input {
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(10px);
      transition: all 0.3s ease;
    }

    .search-input:focus {
      background: rgba(255, 255, 255, 0.15);
      border-color: rgba(120, 200, 255, 0.5);
      box-shadow: 0 0 20px rgba(120, 200, 255, 0.2);
      outline: none;
    }

    /* Categorias modernas */
    .category-container {
      backdrop-filter: blur(10px);
      background: rgba(0, 0, 0, 0.3);
    }

    .category-btn {
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .category-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transition: left 0.5s;
    }

    .category-btn:hover::before {
      left: 100%;
    }

    .category-btn.active {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      box-shadow: 0 8px 32px rgba(102, 126, 234, 0.3);
    }

    .category-btn:not(.active):hover {
      background: rgba(255, 255, 255, 0.1);
      transform: translateY(-2px);
    }

    /* Cards dos canais */
    .channel-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
      gap: 20px;
    }

    .channel-card {
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 16px;
      padding: 20px;
      transition: all 0.3s ease;
      cursor: pointer;
      position: relative;
      overflow: hidden;
    }

    .channel-card.offline {
      opacity: 0.5;
      filter: grayscale(100%);
    }

    .channel-card.offline:hover {
      transform: none;
      opacity: 0.6;
    }

    .channel-card::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(120, 200, 255, 0.1) 0%, transparent 70%);
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .channel-card:hover::before {
      opacity: 1;
    }

    .channel-card:hover {
      transform: translateY(-8px) scale(1.02);
      border-color: rgba(120, 200, 255, 0.3);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3), 0 0 20px rgba(120, 200, 255, 0.2);
    }

    .channel-logo {
      width: 64px;
      height: 64px;
      border-radius: 12px;
      object-fit: contain;
      margin: 0 auto 12px;
      filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
    }

    .channel-name {
      font-size: 0.875rem;
      font-weight: 500;
      text-align: center;
      line-height: 1.4;
    }

    /* Live indicator */
    .live-indicator {
      position: absolute;
      top: 8px;
      right: 8px;
      color: white;
      font-size: 0.7rem;
      padding: 2px 8px;
      border-radius: 12px;
      font-weight: 600;
    }

    .live-indicator.online {
      background: linear-gradient(45deg, #ff4444, #ff6b6b);
      animation: pulse 2s infinite;
    }

    .live-indicator.offline {
      background: linear-gradient(45deg, #6b7280, #9ca3af);
      animation: none;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.7; }
    }

    /* Player moderno */
    .player-overlay {
      background: rgba(0, 0, 0, 0.95);
      backdrop-filter: blur(20px);
      transition: all 0.4s ease;
    }

    /* Video.js personalizado */
    .video-js.vjs-theme-modern {
      font-family: 'Inter', sans-serif;
      width: 100%;
      height: 100%;
      position: relative;
      top: 0;
      left: 0;
      padding: 0;
    }

    .vjs-theme-modern .vjs-control-bar {
      background: linear-gradient(to top, rgba(0, 0, 0, 0.8) 0%, transparent 100%);
      backdrop-filter: blur(10px);
      padding: 8px 16px;
      height: 50px;
      display: flex !important;
      align-items: center; /* Center controls vertically */
    }

    .vjs-theme-modern .vjs-big-play-button {
      background: rgba(120, 200, 255, 0.2);
      border: 2px solid rgba(120, 200, 255, 0.5);
      border-radius: 50%;
      width: 80px;
      height: 80px;
      font-size: 2.5rem;
      backdrop-filter: blur(10px);
      transition: all 0.3s ease;
    }

    .vjs-theme-modern .vjs-big-play-button:hover {
      background: rgba(120, 200, 255, 0.3);
      border-color: rgba(120, 200, 255, 0.8);
    }

    /* Controles visíveis */
    .vjs-theme-modern .vjs-volume-panel,
    .vjs-theme-modern .vjs-current-time,
    .vjs-theme-modern .vjs-progress-control {
      display: flex !important;
      color: white;
      align-items: center; /* Ensure individual controls are centered */
    }

    /* Hide play/pause button */
    .vjs-theme-modern .vjs-play-control {
      display: none !important;
    }

    .vjs-theme-modern .vjs-volume-panel {
      order: 1;
      margin-right: 12px;
      display: flex;
      flex-direction: column-reverse; /* Reverse to put volume bar above mute button */
      align-items: center;
      justify-content: center;
    }

    .vjs-theme-modern .vjs-volume-control {
      transform: rotate(-90deg); /* Keep vertical, pointing up */
      width: 80px; /* Length of the vertical slider */
      height: 4px; /* Thickness of the slider */
      background: rgba(255, 255, 255, 0.1);
      border-radius: 2px;
      margin-bottom: 30px; /* Space below volume bar for mute button */
    }

    .vjs-theme-modern .vjs-volume-bar {
      background: rgba(255, 255, 255, 0.3);
      border-radius: 2px;
    }

    .vjs-theme-modern .vjs-volume-level {
      background: linear-gradient(90deg, #667eea, #764ba2);
      border-radius: 2px;
    }

    .vjs-theme-modern .vjs-progress-control {
      order: 2;
      flex: 1;
      margin: 0 12px;
    }

    .vjs-theme-modern .vjs-progress-holder {
      background: rgba(255, 255, 255, 0.3);
      border-radius: 2px;
      height: 4px;
    }

    .vjs-theme-modern .vjs-play-progress {
      background: linear-gradient(90deg, #667eea, #764ba2);
      border-radius: 2px;
    }

    .vjs-theme-modern .vjs-current-time {
      order: 3;
      font-size: 0.9rem;
      margin-left: 12px;
    }

    /* Ocultar controles desnecessários */
    .vjs-theme-modern .vjs-duration,
    .vjs-theme-modern .vjs-fullscreen-control,
    .vjs-theme-modern .vjs-remaining-time,
    .vjs-theme-modern .vjs-picture-in-picture-control {
      display: none !important;
    }

    /* Botões com hover */
    .vjs-theme-modern .vjs-button:hover {
      color: #667eea;
      transform: scale(1.1);
      transition: all 0.2s ease;
    }

    /* Scrollbar personalizada */
    ::-webkit-scrollbar {
      width: 8px;
    }

    ::-webkit-scrollbar-track {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb {
      background: linear-gradient(135deg, #667eea, #764ba2);
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(135deg, #764ba2, #667eea);
    }

    /* Notification moderna */
    .notification {
      background: linear-gradient(135deg, rgba(15, 20, 25, 0.9) 0%, rgba(0, 0, 0, 0.8) 100%);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    }

    /* Channel info overlay */
    .channel-info-overlay {
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(10px);
      border-radius: 8px;
      padding: 12px;
      position: absolute;
      top: 16px;
      left: 16px;
      z-index: 1000;
      transition: opacity 0.3s ease;
    }

    .channel-info-overlay.hidden {
      opacity: 0;
      pointer-events: none;
    }

    /* Floating close button (square with rounded corners) */
    .close-btn-overlay {
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(10px);
      border-radius: 8px;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      position: absolute;
      top: 16px;
      right: 16px;
      z-index: 1000;
      transition: opacity 0.3s ease, background 0.3s ease;
      cursor: pointer;
    }

    .close-btn-overlay.hidden {
      opacity: 0;
      pointer-events: none;
    }

    .close-btn-overlay:hover {
      background: rgba(255, 68, 68, 0.7);
    }

    /* Responsive */
    @media (max-width: 768px) {
      .channel-grid {
        grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
        gap: 16px;
      }
      
      .channel-card {
        padding: 16px;
      }
      
      .channel-logo {
        width: 56px;
        height: 56px;
      }

      .channel-info-overlay {
        top: 12px;
        left: 12px;
        padding: 10px;
      }

      .close-btn-overlay {
        top: 12px;
        right: 12px;
        width: 36px;
        height: 36px;
        border-radius: 8px;
      }

      .close-btn-overlay i {
        font-size: 1rem;
      }

      .vjs-theme-modern .vjs-control-bar {
        padding: 6px 12px;
        height: 40px;
      }

      .vjs-theme-modern .vjs-volume-panel {
        margin-right: 8px;
      }

      .vjs-theme-modern .vjs-volume-control {
        width: 60px; /* Shorter for mobile */
        margin-bottom: 24px; /* Adjust for mute button below */
      }

      .vjs-theme-modern .vjs-current-time {
        font-size: 0.8rem;
        margin-left: 8px;
      }

      .vjs-theme-modern .vjs-progress-control {
        margin: 0 8px;
      }
    }

    /* Animações de entrada */
    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .channel-card {
      animation: slideUp 0.6s ease forwards;
    }

    .channel-card:nth-child(even) {
      animation-delay: 0.1s;
    }

    .channel-card:nth-child(3n) {
      animation-delay: 0.2s;
    }

    /* Loading estado */
    .loading-shimmer {
      background: linear-gradient(90deg, rgba(255, 255, 255, 0.1) 25%, rgba(255, 255, 255, 0.2) 50%, rgba(255, 255, 255, 0.1) 75%);
      background-size: 200% 100%;
      animation: shimmer 2s infinite;
    }

    @keyframes shimmer {
      0% { background-position: -200% 0; }
      100% { background-position: 200% 0; }
    }
  </style>
</head>
<body>

  <!-- Som -->
  <audio id="clickSound" src="https://cdn.pixabay.com/audio/2025/06/01/audio_d2ccbb367a.mp3" preload="auto"></audio>

  <!-- Notification moderna -->
  <div id="notification" class="notification fixed top-6 left-1/2 transform -translate-x-1/2 px-6 py-4 z-50 opacity-0 transition-all duration-300 max-w-md text-center pointer-events-none"></div>

  <!-- Header moderno -->
  <header class="header-glass sticky top-0 z-40 px-6 py-4">
    <div class="max-w-7xl mx-auto">
      <!-- Logo -->
      <div class="text-center mb-6">
        <div class="mt-2">
          <h1 class="text-2xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent">
            PrimeCast
          </h1>
          <p class="text-gray-400 text-sm">TV Brasileira Premium</p>
        </div>
      </div>
      
      <!-- Search -->
      <div class="search-container">
        <div class="relative">
          <i class="fas fa-search absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
          <input 
            type="text" 
            id="searchInput" 
            oninput="filterChannels()"
            class="search-input w-full pl-12 pr-4 py-3 rounded-2xl text-white placeholder-gray-400"
            placeholder="🔍 Buscar canal ou programa..." 
          />
          <div class="absolute right-4 top-1/2 transform -translate-y-1/2">
            <kbd class="hidden md:inline text-xs bg-gray-700 px-2 py-1 rounded">Ctrl+K</kbd>
          </div>
        </div>
      </div>
    </div>
  </header>

  <!-- Categorias modernas -->
  <nav class="category-container sticky top-20 z-30 px-6 py-4">
    <div class="max-w-7xl mx-auto">
      <div class="flex gap-3 overflow-x-auto pb-2">
        <button class="category-btn active bg-gradient-to-r from-blue-600 to-purple-600 px-6 py-3 rounded-full text-sm font-medium whitespace-nowrap flex items-center gap-2" onclick="setCategory('todos')">
          <i class="fas fa-home"></i>
          Todos
        </button>
        <button class="category-btn bg-gray-800 hover:bg-gray-700 px-6 py-3 rounded-full text-sm font-medium whitespace-nowrap flex items-center gap-2" onclick="setCategory('abertos')">
          <i class="fas fa-tv"></i>
          Abertos
        </button>
        <button class="category-btn bg-gray-800 hover:bg-gray-700 px-6 py-3 rounded-full text-sm font-medium whitespace-nowrap flex items-center gap-2" onclick="setCategory('noticias')">
          <i class="fas fa-newspaper"></i>
          Notícias
        </button>
        <button class="category-btn bg-gray-800 hover:bg-gray-700 px-6 py-3 rounded-full text-sm font-medium whitespace-nowrap flex items-center gap-2" onclick="setCategory('esportes')">
          <i class="fas fa-medal"></i>
          Esportes
        </button>
        <button class="category-btn bg-gray-800 hover:bg-gray-700 px-6 py-3 rounded-full text-sm font-medium whitespace-nowrap flex items-center gap-2" onclick="setCategory('filmes')">
          <i class="fas fa-film"></i>
          Filmes
        </button>
        <button class="category-btn bg-gray-800 hover:bg-gray-700 px-6 py-3 rounded-full text-sm font-medium whitespace-nowrap flex items-center gap-2" onclick="setCategory('desenhos')">
          <i class="fas fa-child"></i>
          Desenhos
        </button>
        <button class="category-btn bg-gray-800 hover:bg-gray-700 px-6 py-3 rounded-full text-sm font-medium whitespace-nowrap flex items-center gap-2" onclick="setCategory('documentarios')">
          <i class="fas fa-book"></i>
          Documentários
        </button>
      </div>
    </div>
  </nav>

  <!-- Lista de Canais -->
  <main class="px-6 py-8">
    <div class="max-w-7xl mx-auto">
      <div id="channelList" class="channel-grid">
        <!-- Canais Abertos -->
        <div class="channel-card offline" data-name="globosp" data-category="abertos" data-url="https://02.xn--l8jyc6ar9fx162a.site/globosp/tracks-v1a1/mono.m3u8?remote=no_check_ip&token=9046bb894563462029605f588e5498d11032802d-bddb7a6e5a9d2c7a2857c06b503ab7f1-1756909619-1756906019">
          <div class="live-indicator offline">
            <span class="online-text" style="display: none;">AO VIVO</span>
            <span class="offline-text" style="display: inline;">OFFLINE</span>
          </div>
          <img src="https://i.imgur.com/aYKmlmc.png" class="channel-logo" />
          <div class="channel-name">Globo SP</div>
        </div>

        <div class="channel-card offline" data-name="globorj" data-category="abertos" data-url="https://aipapai.shop/_temp/globorj.m3u8">
          <div class="live-indicator offline">
            <span class="online-text" style="display: none;">AO VIVO</span>
            <span class="offline-text" style="display: inline;">OFFLINE</span>
          </div>
          <img src="https://i.imgur.com/aYKmlmc.png" class="channel-logo" />
          <div class="channel-name">Globo RJ</div>
        </div>

        <div class="channel-card" data-name="cultura" data-category="abertos" data-url="https://player-tvcultura.stream.uol.com.br/live/tvcultura_lsd.m3u8?vhost=player-tvcultura.stream.uol.com.br">
          <div class="live-indicator online">
            <span class="online-text" style="display: inline;">AO VIVO</span>
            <span class="offline-text" style="display: none;">OFFLINE</span>
          </div>
          <img src="https://i.imgur.com/PJLJzdW.png" class="channel-logo" />
          <div class="channel-name">TV Cultura</div>
        </div>

        <div class="channel-card offline" data-name="record" data-category="abertos" data-url="https://aipapai.shop/_temp/record.m3u8">
          <div class="live-indicator offline">
            <span class="online-text" style="display: none;">AO VIVO</span>
            <span class="offline-text" style="display: inline;">OFFLINE</span>
          </div>
          <img src="https://i.imgur.com/SehYFaG.png" class="channel-logo" />
          <div class="channel-name">Record</div>
        </div>

        <div class="channel-card offline" data-name="redetv" data-category="abertos" data-url="https://aipapai.shop/_temp/redetv.m3u8">
          <div class="live-indicator offline">
            <span class="online-text" style="display: none;">AO VIVO</span>
            <span class="offline-text" style="display: inline;">OFFLINE</span>
          </div>
          <img src="https://i.imgur.com/uKSf0kb.png" class="channel-logo" />
          <div class="channel-name">RedeTV!</div>
        </div>

        <div class="channel-card offline" data-name="sbt" data-category="abertos" data-url="https://aipapai.shop/_temp/sbt.m3u8">
          <div class="live-indicator offline">
            <span class="online-text" style="display: none;">AO VIVO</span>
            <span class="offline-text" style="display: inline;">OFFLINE</span>
          </div>
          <img src="https://i.imgur.com/Orcyltp.png" class="channel-logo" />
          <div class="channel-name">SBT</div>
        </div>

        <div class="channel-card offline" data-name="band" data-category="abertos" data-url="https://aipapai.shop/_temp/band.m3u8">
          <div class="live-indicator offline">
            <span class="online-text" style="display: none;">AO VIVO</span>
            <span class="offline-text" style="display: inline;">OFFLINE</span>
          </div>
          <img src="https://i.imgur.com/QZgrKOf.png" class="channel-logo" />
          <div class="channel-name">Band</div>
        </div>

        <!-- Canais de Notícias -->
        <div class="channel-card offline" data-name="cnn brasil" data-category="noticias" data-url="https://aipapai.shop/_temp/cnnbrasil.m3u8">
          <div class="live-indicator offline">
            <span class="online-text" style="display: none;">AO VIVO</span>
            <span class="offline-text" style="display: inline;">OFFLINE</span>
          </div>
          <img src="https://i.imgur.com/sKwH2u4.png" class="channel-logo" />
          <div class="channel-name">CNN Brasil</div>
        </div>

        <div class="channel-card offline" data-name="globo news" data-category="noticias" data-url="https://aipapai.shop/_temp/globonews.m3u8">
          <div class="live-indicator offline">
            <span class="online-text" style="display: none;">AO VIVO</span>
            <span class="offline-text" style="display: inline;">OFFLINE</span>
          </div>
          <img src="https://i.imgur.com/CCEg0km.png" class="channel-logo" />
          <div class="channel-name">Globo News</div>
        </div>

        <div class="channel-card offline" data-name="band news" data-category="noticias" data-url="https://aipapai.shop/_temp/bandnews.m3u8">
          <div class="live-indicator offline">
            <span class="online-text" style="display: none;">AO VIVO</span>
            <span class="offline-text" style="display: inline;">OFFLINE</span>
          </div>
          <img src="https://i.imgur.com/uzNyEV4.png" class="channel-logo" />
          <div class="channel-name">Band News</div>
        </div>

        <div class="channel-card offline" data-name="record news" data-category="noticias" data-url="https://aipapai.shop/_temp/recordnews.m3u8">
          <div class="live-indicator offline">
            <span class="online-text" style="display: none;">AO VIVO</span>
            <span class="offline-text" style="display: inline;">OFFLINE</span>
          </div>
          <img src="https://i.imgur.com/OlccJ9t.png" class="channel-logo" />
          <div class="channel-name">Record News</div>
        </div>

        <!-- Canais de Esportes -->
        <div class="channel-card offline" data-name="sportv" data-category="esportes" data-url="https://aipapai.shop/_temp/sportv.m3u8">
          <div class="live-indicator offline">
            <span class="online-text" style="display: none;">AO VIVO</span>
            <span class="offline-text" style="display: inline;">OFFLINE</span>
          </div>
          <img src="https://i.imgur.com/IwO9fQL.png" class="channel-logo" />
          <div class="channel-name">Sportv</div>
        </div>

        <div class="channel-card offline" data-name="sportv 2" data-category="esportes" data-url="https://aipapai.shop/_temp/sportv2.m3u8">
          <div class="live-indicator offline">
            <span class="online-text" style="display: none;">AO VIVO</span>
            <span class="offline-text" style="display: inline;">OFFLINE</span>
          </div>
          <img src="https://i.imgur.com/Aln0pjU.png" class="channel-logo" />
          <div class="channel-name">Sportv 2</div>
        </div>

        <div class="channel-card offline" data-name="sportv3" data-category="esportes" data-url="https://aipapai.shop/_temp/sportv3.m3u8">
          <div class="live-indicator offline">
            <span class="online-text" style="display: none;">AO VIVO</span>
            <span class="offline-text" style="display: inline;">OFFLINE</span>
          </div>
          <img src="https://i.imgur.com/FaVJDPa.png" class="channel-logo" />
          <div class="channel-name">Sportv 3</div>
        </div>

        <div class="channel-card offline" data-name="sportv 4" data-category="esportes" data-url="https://aipapai.shop/_temp/sportv4.m3u8">
          <div class="live-indicator offline">
            <span class="online-text" style="display: none;">AO VIVO</span>
            <span class="offline-text" style="display: inline;">OFFLINE</span>
          </div>
          <img src="https://i.imgur.com/IwO9fQL.png" class="channel-logo" />
          <div class="channel-name">Sportv 4</div>
        </div>

        <div class="channel-card offline" data-name="espn" data-category="esportes" data-url="https://aipapai.shop/_temp/espn.m3u8">
          <div class="live-indicator offline">
            <span class="online-text" style="display: none;">AO VIVO</span>
            <span class="offline-text" style="display: inline;">OFFLINE</span>
          </div>
          <img src="https://i.imgur.com/AUdOPW0.png" class="channel-logo" />
          <div class="channel-name">ESPN</div>
        </div>

        <div class="channel-card offline" data-name="espn2" data-category="esportes" data-url="https://aipapai.shop/_temp/espn2.m3u8">
          <div class="live-indicator offline">
            <span class="online-text" style="display: none;">AO VIVO</span>
            <span class="offline-text" style="display: inline;">OFFLINE</span>
          </div>
          <img src="https://i.imgur.com/s2YAxM9.png" class="channel-logo" />
          <div class="channel-name">ESPN 2</div>
        </div>

        <div class="channel-card offline" data-name="espn3" data-category="esportes" data-url="https://aipapai.shop/_temp/espn3.m3u8">
          <div class="live-indicator offline">
            <span class="online-text" style="display: none;">AO VIVO</span>
            <span class="offline-text" style="display: inline;">OFFLINE</span>
          </div>
          <img src="https://i.imgur.com/zctUday.png" class="channel-logo" />
          <div class="channel-name">ESPN 3</div>
        </div>

        <div class="channel-card offline" data-name="espn4" data-category="esportes" data-url="https://aipapai.shop/_temp/espn4.m3u8">
          <div class="live-indicator offline">
            <span class="online-text" style="display: none;">AO VIVO</span>
            <span class="offline-text" style="display: inline;">OFFLINE</span>
          </div>
          <img src="https://i.imgur.com/k3iSdJx.png" class="channel-logo" />
          <div class="channel-name">ESPN 4</div>
        </div>

        <div class="channel-card offline" data-name="espn5" data-category="esportes" data-url="https://aipapai.shop/_temp/espn5.m3u8">
          <div class="live-indicator offline">
            <span class="online-text" style="display: none;">AO VIVO</span>
            <span class="offline-text" style="display: inline;">OFFLINE</span>
          </div>
          <img src="https://i.imgur.com/7YScj1R.png" class="channel-logo" />
          <div class="channel-name">ESPN 5</div>
        </div>

        <div class="channel-card offline" data-name="espn6" data-category="esportes" data-url="https://aipapai.shop/_temp/espn6.m3u8">
          <div class="live-indicator offline">
            <span class="online-text" style="display: none;">AO VIVO</span>
            <span class="offline-text" style="display: inline;">OFFLINE</span>
          </div>
          <img src="https://i.imgur.com/dtWJKS6.png" class="channel-logo" />
          <div class="channel-name">ESPN 6</div>
        </div>

        <div class="channel-card offline" data-name="premiere" data-category="esportes" data-url="https://aipapai.shop/_temp/premiere.m3u8">
          <div class="live-indicator offline">
            <span class="online-text" style="display: none;">AO VIVO</span>
            <span class="offline-text" style="display: inline;">OFFLINE</span>
          </div>
          <img src="https://i.imgur.com/ydDYQhX.png" class="channel-logo" />
          <div class="channel-name">Premiere</div>
        </div>

        <div class="channel-card offline" data-name="premiere2" data-category="esportes" data-url="https://aipapai.shop/_temp/premiere2.m3u8">
          <div class="live-indicator offline">
            <span class="online-text" style="display: none;">AO VIVO</span>
            <span class="offline-text" style="display: inline;">OFFLINE</span>
          </div>
          <img src="https://i.imgur.com/ydDYQhX.png" class="channel-logo" />
          <div class="channel-name">Premiere 2</div>
        </div>

        <div class="channel-card offline" data-name="premiere3" data-category="esportes" data-url="https://aipapai.shop/_temp/premiere3.m3u8">
          <div class="live-indicator offline">
            <span class="online-text" style="display: none;">AO VIVO</span>
            <span class="offline-text" style="display: inline;">OFFLINE</span>
          </div>
          <img src="https://i.imgur.com/ydDYQhX.png" class="channel-logo" />
          <div class="channel-name">Premiere 3</div>
        </div>

        <div class="channel-card offline" data-name="premiere4" data-category="esportes" data-url="https://aipapai.shop/_temp/premiere4.m3u8">
          <div class="live-indicator offline">
            <span class="online-text" style="display: none;">AO VIVO</span>
            <span class="offline-text" style="display: inline;">OFFLINE</span>
          </div>
          <img src="https://i.imgur.com/ydDYQhX.png" class="channel-logo" />
          <div class="channel-name">Premiere 4</div>
        </div>

        <div class="channel-card offline" data-name="premiere5" data-category="esportes" data-url="https://aipapai.shop/_temp/premiere5.m3u8">
          <div class="live-indicator offline">
            <span class="online-text" style="display: none;">AO VIVO</span>
            <span class="offline-text" style="display: inline;">OFFLINE</span>
          </div>
          <img src="https://i.imgur.com/ydDYQhX.png" class="channel-logo" />
          <div class="channel-name">Premiere 5</div>
        </div>

        <div class="channel-card offline" data-name="premiere6" data-category="esportes" data-url="https://aipapai.shop/_temp/premiere6.m3u8">
          <div class="live-indicator offline">
            <span class="online-text" style="display: none;">AO VIVO</span>
            <span class="offline-text" style="display: inline;">OFFLINE</span>
          </div>
          <img src="https://i.imgur.com/ydDYQhX.png" class="channel-logo" />
          <div class="channel-name">Premiere 6</div>
        </div>

        <div class="channel-card offline" data-name="premiere7" data-category="esportes" data-url="https://aipapai.shop/_temp/premiere7.m3u8">
          <div class="live-indicator offline">
            <span class="online-text" style="display: none;">AO VIVO</span>
            <span class="offline-text" style="display: inline;">OFFLINE</span>
          </div>
          <img src="https://i.imgur.com/ydDYQhX.png" class="channel-logo" />
          <div class="channel-name">Premiere 7</div>
        </div>

        <div class="channel-card offline" data-name="premiere8" data-category="esportes" data-url="https://aipapai.shop/_temp/premiere8.m3u8">
          <div class="live-indicator offline">
            <span class="online-text" style="display: none;">AO VIVO</span>
            <span class="offline-text" style="display: inline;">OFFLINE</span>
          </div>
          <img src="https://i.imgur.com/ydDYQhX.png" class="channel-logo" />
          <div class="channel-name">Premiere 8</div>
        </div>

        <!-- Canais de Filmes (exemplos) -->
        <div class="channel-card offline" data-name="telecine" data-category="filmes" data-url="https://aipapai.shop/_temp/telecine.m3u8">
          <div class="live-indicator offline">
            <span class="online-text" style="display: none;">AO VIVO</span>
            <span class="offline-text" style="display: inline;">OFFLINE</span>
          </div>
          <img src="https://via.placeholder.com/64x64/667eea/ffffff?text=TC" class="channel-logo" />
          <div class="channel-name">Telecine</div>
        </div>

        <!-- Canais de Desenhos (exemplos) -->
        <div class="channel-card offline" data-name="cartoon network" data-category="desenhos" data-url="https://aipapai.shop/_temp/cartoon.m3u8">
          <div class="live-indicator offline">
            <span class="online-text" style="display: none;">AO VIVO</span>
            <span class="offline-text" style="display: inline;">OFFLINE</span>
          </div>
          <img src="https://via.placeholder.com/64x64/ff6b6b/ffffff?text=CN" class="channel-logo" />
          <div class="channel-name">Cartoon Network</div>
        </div>

        <!-- Canais de Documentários (exemplos) -->
        <div class="channel-card offline" data-name="discovery" data-category="documentarios" data-url="https://aipapai.shop/_temp/discovery.m3u8">
          <div class="live-indicator offline">
            <span class="online-text" style="display: none;">AO VIVO</span>
            <span class="offline-text" style="display: inline;">OFFLINE</span>
          </div>
          <img src="https://via.placeholder.com/64x64/4ecdc4/ffffff?text=DC" class="channel-logo" />
          <div class="channel-name">Discovery Channel</div>
        </div>
      </div>
    </div>
  </main>

  <!-- Player Overlay -->
  <div id="playerOverlay" class="player-overlay fixed inset-0 z-50 opacity-0 pointer-events-none transition-all duration-300">
    <!-- Channel info overlay -->
    <div id="channelInfoOverlay" class="channel-info-overlay hidden">
      <div class="flex items-center gap-3">
        <img id="overlayChannelLogo" src="" class="w-10 h-10 rounded-lg object-contain" />
        <div>
          <h3 id="overlayChannelName" class="text-white font-semibold text-lg"></h3>
          <p class="text-gray-300 text-sm flex items-center gap-1">
            <span class="w-2 h-2 bg-red-500 rounded-full animate-pulse"></span>
            Transmissão ao vivo
          </p>
        </div>
      </div>
    </div>
    
    <!-- Floating close button -->
    <button id="closeBtnOverlay" onclick="closePlayer()" class="close-btn-overlay hidden">
      <i class="fas fa-times text-lg text-white"></i>
    </button>
    
    <div class="relative h-full" id="videoContainer">
      <!-- Player will be dynamically created here -->
    </div>
  </div>

  <script>
    let player = null;
    let currentCategory = 'todos';
    let favoriteChannels = JSON.parse(localStorage.getItem('favoriteChannels') || '[]');
    window.currentHls = null;
    let overlayTimeout = null;
    let notificationTimeout = null;
    let channelStatus = new Map();
    let statusCheckInterval = null;

    // Keyboard shortcuts
    document.addEventListener('keydown', function(e) {
      if (e.ctrlKey && e.key === 'k') {
        e.preventDefault();
        document.getElementById('searchInput').focus();
      }
      if (e.key === 'Escape') {
        closePlayer();
      }
    });

    // Initialize
    document.addEventListener('DOMContentLoaded', function() {
      filterChannels();
      setupChannelAnimations();
      checkChannelStatus();
      startStatusCheckInterval();
      setupChannelClickListeners();
      
      // Cleanup on page unload
      window.addEventListener('beforeunload', function() {
        cleanupPlayer();
        stopStatusCheckInterval();
      });
    });

    function setupChannelAnimations() {
      const channels = document.querySelectorAll('.channel-card');
      channels.forEach((channel, index) => {
        channel.style.animationDelay = `${index * 0.05}s`;
      });
    }

    function setupChannelClickListeners() {
      const channels = document.querySelectorAll('.channel-card');
      channels.forEach(channel => {
        channel.addEventListener('click', () => {
          const url = channel.dataset.url;
          const name = channel.querySelector('.channel-name').textContent;
          const logo = channel.querySelector('.channel-logo').src;
          playChannel(url, name, logo);
        });
      });
    }

    async function checkChannelStatus() {
      const channels = document.querySelectorAll('.channel-card[data-url]');
      
      for (let channel of channels) {
        const url = channel.dataset.url;
        const name = channel.dataset.name;
        let isOnline = false;
        
        // Try up to 2 attempts
        for (let attempt = 1; attempt <= 2; attempt++) {
          try {
            const controller = new AbortController();
            const timeoutId = setTimeout(() => controller.abort(), 5000); // 5-second timeout
            
            const response = await fetch(url, {
              method: 'GET',
              mode: 'cors',
              cache: 'no-cache',
              signal: controller.signal,
              headers: {
                'Range': 'bytes=0-1023' // Request only the first 1KB to minimize bandwidth
              }
            });
            
            clearTimeout(timeoutId);
            
            if (response.ok) {
              // Check if the response contains valid HLS content
              const contentType = response.headers.get('content-type') || '';
              if (contentType.includes('application/vnd.apple.mpegurl') || contentType.includes('application/x-mpegURL')) {
                isOnline = true;
                break; // Exit retry loop on success
              }
            }
            
            // Wait 1 second before retrying
            if (attempt < 2) {
              await new Promise(resolve => setTimeout(resolve, 1000));
            }
          } catch (error) {
            console.warn(`Status check failed for ${name} (attempt ${attempt}):`, error);
            if (attempt === 2) {
              isOnline = false;
            }
          }
        }
        
        setChannelStatus(channel, isOnline);
        channelStatus.set(name, isOnline);
      }
    }

    function startStatusCheckInterval() {
      checkChannelStatus(); // Run immediately
      statusCheckInterval = setInterval(checkChannelStatus, 30000); // Then every 30 seconds
    }

    function stopStatusCheckInterval() {
      if (statusCheckInterval) {
        clearInterval(statusCheckInterval);
        statusCheckInterval = null;
      }
    }

    function setChannelStatus(channelElement, isOnline) {
      const indicator = channelElement.querySelector('.live-indicator');
      const onlineText = indicator.querySelector('.online-text');
      const offlineText = indicator.querySelector('.offline-text');
      
      if (isOnline) {
        channelElement.classList.remove('offline');
        indicator.classList.add('online');
        indicator.classList.remove('offline');
        onlineText.style.display = 'inline';
        offlineText.style.display = 'none';
      } else {
        channelElement.classList.add('offline');
        indicator.classList.add('offline');
        indicator.classList.remove('online');
        onlineText.style.display = 'none';
        offlineText.style.display = 'inline';
      }
    }

    function playChannel(url, name, logo) {
      try {
        playClickSound();
        
        cleanupPlayer();
        
        const overlay = document.getElementById('playerOverlay');
        overlay.classList.remove('opacity-0', 'pointer-events-none');
        overlay.classList.add('opacity-100', 'pointer-events-auto');

        document.getElementById('overlayChannelName').textContent = name;
        document.getElementById('overlayChannelLogo').src = logo;

        setTimeout(() => {
          initializePlayer(url, name);
          showChannelInfo();
        }, 100);

      } catch (error) {
        console.error('Error playing channel:', error);
        showNotification('Canal indisponível no momento', 'error');
      }
    }

    function cleanupPlayer() {
      if (overlayTimeout) {
        clearTimeout(overlayTimeout);
        overlayTimeout = null;
      }
      
      if (notificationTimeout) {
        clearTimeout(notificationTimeout);
        notificationTimeout = null;
      }

      const channelOverlay = document.getElementById('channelInfoOverlay');
      if (channelOverlay) {
        channelOverlay.classList.add('hidden');
      }

      const closeBtnOverlay = document.getElementById('closeBtnOverlay');
      if (closeBtnOverlay) {
        closeBtnOverlay.classList.add('hidden');
      }

      if (window.currentHls) {
        try {
          window.currentHls.stopLoad();
          window.currentHls.detachMedia();
          window.currentHls.destroy();
        } catch (e) {
          console.log('HLS cleanup error:', e);
        }
        window.currentHls = null;
      }
      
      if (player) {
        try {
          const videoElement = player.tech(true);
          if (videoElement && videoElement.el_) {
            videoElement.el_.pause();
            videoElement.el_.src = '';
            videoElement.el_.load();
          }
          
          player.pause();
          player.dispose();
        } catch (e) {
          console.log('Player cleanup error:', e);
        }
        player = null;
      }

      if (window.videojs && window.videojs.getPlayers) {
        const players = window.videojs.getPlayers();
        Object.keys(players).forEach(playerId => {
          if (players[playerId]) {
            try {
              players[playerId].pause();
              players[playerId].dispose();
            } catch (e) {
              console.log('Force cleanup error:', e);
            }
          }
        });
      }

      const videoContainer = document.getElementById('videoContainer');
      if (videoContainer) {
        videoContainer.innerHTML = '';
      }

      const allAudio = document.querySelectorAll('audio, video');
      allAudio.forEach(element => {
        try {
          if (element.id !== 'clickSound') {
            element.pause();
            element.src = '';
            element.load();
          }
        } catch (e) {
          console.log('Audio cleanup error:', e);
        }
      });
    }

    function initializePlayer(url, channelName) {
      try {
        const videoContainer = document.getElementById('videoContainer');
        if (!videoContainer) {
          throw new Error('Video container not found');
        }

        const uniqueId = 'videoPlayer_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
        const videoWrapper = document.createElement('div');
        videoWrapper.className = 'video-wrapper w-full h-full';
        
        const newVideoElement = document.createElement('video-js');
        newVideoElement.id = uniqueId;
        newVideoElement.className = 'vjs-theme-modern video-js vjs-default-skin w-full h-full';
        newVideoElement.setAttribute('controls', '');
        newVideoElement.setAttribute('preload', 'auto');
        newVideoElement.setAttribute('data-setup', '{}');
        
        newVideoElement.innerHTML = `
          <p class="vjs-no-js">
            Para assistir este vídeo, você precisa ativar o JavaScript, e considere fazer upgrade para um navegador web
            <a href="https://videojs.com/html5-video-support/" target="_blank">que suporte vídeos HTML5</a>.
          </p>
        `;
        
        videoWrapper.appendChild(newVideoElement);
        videoContainer.appendChild(videoWrapper);

        setTimeout(() => {
          player = videojs(uniqueId, {
            controls: true,
            fluid: true,
            responsive: true,
            techOrder: ['html5'],
            html5: {
              vhs: {
                overrideNative: true
              }
            },
            sources: [],
            aspectRatio: '16:9',
            controlBar: {
              pictureInPictureToggle: false
            }
          });

          player.ready(() => {
            if (Hls.isSupported()) {
              window.currentHls = new Hls({
                enableWorker: false,
                lowLatencyMode: false,
                maxBufferLength: 30,
                manifestLoadingTimeOut: 20000,
                manifestLoadingMaxRetry: 3,
                levelLoadingTimeOut: 15000,
                fragLoadingTimeOut: 20000,
                fragLoadingMaxRetry: 4,
                levelLoadingMaxRetry: 2,
                xhrSetup: function(xhr, url) {
                  xhr.withCredentials = false;
                  xhr.timeout = 15000;
                }
              });
              
              window.currentHls.loadSource(url);
              window.currentHls.attachMedia(player.tech().el());
              
              window.currentHls.on(Hls.Events.MANIFEST_PARSED, function() {
                console.log('Stream ready, starting playback');
                setChannelStatusByName(channelName, true);
                
                setTimeout(() => {
                  player.play().catch(e => {
                    console.log('Autoplay prevented, user interaction required:', e);
                    showNotification('Clique na tela para iniciar', 'info');
                  });
                }, 500);
              });

              window.currentHls.on(Hls.Events.ERROR, function(event, data) {
                console.error('HLS Error:', data);
                if (data.fatal) {
                  setChannelStatusByName(channelName, false);
                  
                  switch(data.type) {
                    case Hls.ErrorTypes.NETWORK_ERROR:
                      console.log('Network error, attempting recovery...');
                      showNotification('Erro de conexão - Canal offline', 'error');
                      break;
                    case Hls.ErrorTypes.MEDIA_ERROR:
                      console.log('Media error, attempting recovery...');
                      showNotification('Erro de mídia - Canal offline', 'error');
                      break;
                    default:
                      showNotification('Canal indisponível no momento', 'error');
                      break;
                  }
                  
                  setTimeout(() => {
                    closePlayer();
                  }, 2000);
                }
              });

              window.currentHls.on(Hls.Events.MANIFEST_LOADING, function() {
                showNotification('Carregando canal...', 'info');
              });

            } else if (player.tech().el().canPlayType('application/vnd.apple.mpegurl')) {
              player.src({
                src: url,
                type: 'application/x-mpegURL'
              });
              
              setTimeout(() => {
                player.play().catch(e => {
                  console.log('Autoplay prevented:', e);
                  showNotification('Clique na tela para iniciar', 'info');
                });
              }, 500);
            } else {
              showNotification('Navegador não suporta streaming HLS', 'error');
            }

            player.on('error', function(error) {
              console.error('Player error:', error);
              setChannelStatusByName(channelName, false);
              showNotification('Erro na reprodução do canal', 'error');
            });

            player.on('loadeddata', function() {
              console.log('Channel loaded successfully');
              setChannelStatusByName(channelName, true);
              showNotification('Canal carregado com sucesso', 'success');
            });

            player.on('waiting', function() {
              console.log('Buffering...');
            });

            player.on('loadstart', function() {
              showNotification('Iniciando carregamento...', 'info');
            });
            
            videoWrapper.addEventListener('click', function(e) {
              if (e.target === videoWrapper || e.target.tagName === 'VIDEO' || e.target.classList.contains('vjs-tech')) {
                showChannelInfo();
              }
            });
          });

        }, 300);

      } catch (error) {
        console.error('Error initializing player:', error);
        showNotification('Erro ao inicializar o player', 'error');
      }
    }

    function setChannelStatusByName(channelName, isOnline) {
      channelStatus.set(channelName.toLowerCase(), isOnline);
      
      const channels = document.querySelectorAll('.channel-card');
      channels.forEach(channel => {
        const name = channel.dataset.name;
        if (name === channelName.toLowerCase()) {
          setChannelStatus(channel, isOnline);
        }
      });
    }

    function closePlayer() {
      const overlay = document.getElementById('playerOverlay');
      overlay.classList.remove('opacity-100', 'pointer-events-auto');
      overlay.classList.add('opacity-0', 'pointer-events-none');

      cleanupPlayer();
    }

    function setCategory(category) {
      currentCategory = category;
      
      document.querySelectorAll('.category-btn').forEach(btn => {
        btn.classList.remove('active', 'bg-gradient-to-r', 'from-blue-600', 'to-purple-600');
        btn.classList.add('bg-gray-800', 'hover:bg-gray-700');
      });
      
      event.target.classList.add('active', 'bg-gradient-to-r', 'from-blue-600', 'to-purple-600');
      event.target.classList.remove('bg-gray-800', 'hover:bg-gray-700');
      
      filterChannels();
    }

    function filterChannels() {
      const searchTerm = document.getElementById('searchInput').value.toLowerCase();
      const channels = document.querySelectorAll('.channel-card');
      let visibleCount = 0;

      channels.forEach((channel, index) => {
        const name = channel.dataset.name.toLowerCase();
        const category = channel.dataset.category;
        
        const matchesSearch = name.includes(searchTerm);
        const matchesCategory = currentCategory === 'todos' || category === currentCategory;
        
        if (matchesSearch && matchesCategory) {
          channel.style.display = 'block';
          channel.style.animationDelay = `${visibleCount * 0.05}s`;
          visibleCount++;
        } else {
          channel.style.display = 'none';
        }
      });

      if (visibleCount === 0 && searchTerm) {
        showNotification('Nenhum canal encontrado', 'info');
      }
    }

    function showNotification(message, type = 'info') {
      if (notificationTimeout) {
        clearTimeout(notificationTimeout);
        notificationTimeout = null;
      }

      const notification = document.getElementById('notification');
      notification.textContent = message;
      notification.className = `notification fixed top-6 left-1/2 transform -translate-x-1/2 px-6 py-4 z-50 transition-all duration-300 max-w-md text-center opacity-100 pointer-events-none`;
      
      if (type === 'error') {
        notification.style.background = 'linear-gradient(135deg, rgba(220, 38, 38, 0.9), rgba(153, 27, 27, 0.8))';
      } else if (type === 'success') {
        notification.style.background = 'linear-gradient(135deg, rgba(34, 197, 94, 0.9), rgba(21, 128, 61, 0.8))';
      } else {
        notification.style.background = 'linear-gradient(135deg, rgba(59, 130, 246, 0.9), rgba(37, 99, 235, 0.8))';
      }

      notificationTimeout = setTimeout(() => {
        notification.classList.remove('opacity-100');
        notification.classList.add('opacity-0');
      }, 3000);
    }

    function showChannelInfo() {
      const channelOverlay = document.getElementById('channelInfoOverlay');
      const closeBtnOverlay = document.getElementById('closeBtnOverlay');
      if (!channelOverlay || !closeBtnOverlay) return;
      
      channelOverlay.classList.remove('hidden');
      closeBtnOverlay.classList.remove('hidden');
      
      if (overlayTimeout) {
        clearTimeout(overlayTimeout);
      }
      
      overlayTimeout = setTimeout(() => {
        channelOverlay.classList.add('hidden');
        closeBtnOverlay.classList.add('hidden');
      }, 3000);
    }

    function playClickSound() {
      try {
        const sound = document.getElementById('clickSound');
        sound.currentTime = 0;
        sound.play().catch(() => {});
      } catch (error) {}
    }

    let lastScroll = 0;
    window.addEventListener('scroll', () => {
      const currentScroll = window.pageYOffset;
      const header = document.querySelector('.header-glass');
      
      if (currentScroll > lastScroll && currentScroll > 100) {
        header.style.transform = 'translateY(-100%)';
      } else {
        header.style.transform = 'translateY(0)';
      }
      
      lastScroll = currentScroll;
    });
  </script>
</body>
</html>
